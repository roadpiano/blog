"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2976],{9135:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var r=t(5893),o=t(1151);const a={},i="\u5bfc\u822a\u6a21\u5757",c={id:"module/navbar",title:"\u5bfc\u822a\u6a21\u5757",description:"",source:"@site/docs/module/navbar.md",sourceDirName:"module",slug:"/module/navbar",permalink:"/docs/module/navbar",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module/navbar.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"markdown",permalink:"/docs/markdown"},next:{title:"NodeJS",permalink:"/docs/category/nodejs"}},s={},l=[];function d(n){const e={code:"code",h1:"h1",pre:"pre",...(0,o.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"\u5bfc\u822a\u6a21\u5757",children:"\u5bfc\u822a\u6a21\u5757"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:'<div class="sticky-navbar">\n  <p>All Products</p>\n  <div class="navbar-indicator">\n    <a href="#audios" class="navbar-btn active">Audios</a>\n    <a href="#videos" class="navbar-btn">Videos</a>\n  </div>\n</div>\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// navbar BEGIN\nfunction getTop(el) {\n  let top = el.offsetTop;\n  let currentParent = el.offsetParent;\n  while (currentParent != null) {\n    top += currentParent.offsetTop;\n    currentParent = currentParent.offsetParent;\n  }\n  return top;\n}\nfunction getScrollTop() {\n  var supportPageOffset = window.pageXOffset !== undefined \n  // \u5224\u65ad\u6e32\u67d3\u6a21\u5f0f\u662f\u4e0d\u662f\u6807\u51c6\u6a21\u5f0f \n  var isCSS1Compat = ((document.compatMode || '') === 'CSS1Compat')\n  // \u5411\u4e0b\u6eda\u52a8\u7684\u9ad8\u5ea6\n  var scrolledTop = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n  return scrolledTop;\n}\nfunction scrollToEl(el, topSpace) {\n  var targetTop = getTop(el) + topSpace;\n  function loopAnimate() {\n    var currentTop = getScrollTop();\n    var distance = currentTop - targetTop;  \n    if (Math.abs(distance) > 2) {\n      window.scrollTo(0, currentTop - distance / 4);\n      window.requestAnimationFrame(loopAnimate);\n    }\n  }\n  loopAnimate();\n}\nwindow.addEventListener('DOMContentLoaded', function() {\n  var switchBlockEl = document.querySelectorAll('.switch-block');\n  // switchBlockEl = [switchBlockEl[0]]\n  toArray(switchBlockEl).forEach(function(switchBlock) {\n    var anchorList = switchBlock.querySelectorAll('.navbar-btn[href^=\"#\"]');\n    var anchorRange = [];\n    toArray(anchorList).forEach(function(anchor) {\n      var targetId = anchor.getAttribute('href');\n      var scrolltarget = document.querySelector(targetId);\n      var targetHeightRange = {\n        anchorEl: anchor,\n        targetEl: scrolltarget,\n        top: getTop(scrolltarget),\n        bottom: getTop(scrolltarget) + scrolltarget.getBoundingClientRect().height,\n      }\n      anchorRange.push(targetHeightRange);\n      anchor.addEventListener('click', function (e) {\n        e.preventDefault();\n        clearchildrenActive(anchorList);\n        anchor.classList.add('active');\n        if (!app.forIE.isIE()) {\n          scrolltarget.scrollIntoView({\n            behavior: \"smooth\",\n          });\n        } else {\n          scrollToEl(scrolltarget, 0);\n        }\n      })\n    })\n    var activeAnchorFn = debounce(function () {\n      // \u5411\u4e0b\u6eda\u52a8\u7684\u9ad8\u5ea6\n      var scrolledTop = getScrollTop();\n      // \u5f53\u524d\u5c4f\u5e55\u4e2d\u95f4\u7ebf\u5728\u6587\u6863\u4e2d\u7684\u7edd\u5bf9\u9ad8\u5ea6\n      var currentViewportAbsHeight = scrolledTop + document.documentElement.clientHeight / 2;\n      var isContained = false;\n      anchorRange.forEach(function(range) {\n        if (currentViewportAbsHeight > range.top && currentViewportAbsHeight < range.bottom && !isContained) {\n          clearchildrenActive(range.anchorEl.parentNode);\n          range.anchorEl.classList.add('active');\n          isContained = true\n        }\n      })\n      if (isContained) {return};\n      var minDistant, activeIndex;\n      anchorRange.forEach(function(range, index) {\n        var elMiddleTop = range.top + range.bottom / 2;\n        var currentDistance = Math.abs(currentViewportAbsHeight - elMiddleTop);\n        if (!minDistant) {\n          minDistant = currentDistance;\n          activeIndex = index;\n        }\n        if(currentDistance < minDistant) {\n          minDistant = currentDistance;\n          activeIndex = index;\n        }\n      })\n      clearchildrenActive(anchorRange[activeIndex].anchorEl.parentNode);\n      anchorRange[activeIndex].anchorEl.classList.add('active');\n    }, 20);\n    window.addEventListener('scroll', activeAnchorFn, false);\n    if (app.forIE.isIE()) {\n      var stickyNavbarEl = switchBlock.querySelector('.sticky-navbar');\n      var navbarContainer = stickyNavbarEl.parentNode;\n      navbarContainer.style.height = 'auto';\n      var fixRange = {\n        top: getTop(navbarContainer),\n        bottom: getTop(navbarContainer) + navbarContainer.getBoundingClientRect().height - stickyNavbarEl.getBoundingClientRect().height,\n      }\n      var stickyTop = Number(getComputedStyle(stickyNavbarEl).top.slice(0, -2));\n      var containerTop = getTop(navbarContainer);\n      var sticky2Fix4IE = debounce(function() {\n        var currentViewportWithTop = getScrollTop() + stickyTop;\n        // console.log(currentViewportWithTop, fixRange.top, fixRange.bottom);\n        stickyNavbarEl.style.width = '220px';\n        if (currentViewportWithTop < fixRange.top) {\n          stickyNavbarEl.style.position = '';\n          stickyNavbarEl.style.top = '';\n        } else if (currentViewportWithTop < fixRange.bottom) {\n          stickyNavbarEl.style.position = 'fixed';\n          stickyNavbarEl.style.top = '';\n        } else if (currentViewportWithTop >= fixRange.bottom) {\n          stickyNavbarEl.style.position = 'absolute';\n          stickyNavbarEl.style.top = fixRange.bottom - containerTop + 'px';\n        }\n      }, 10);\n      window.addEventListener('scroll', sticky2Fix4IE, false);\n    }\n  })\n});\n"})})]})}function p(n={}){const{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}},1151:(n,e,t)=>{t.d(e,{Z:()=>c,a:()=>i});var r=t(7294);const o={},a=r.createContext(o);function i(n){const e=r.useContext(a);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);