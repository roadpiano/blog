"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5383],{9216:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=t(5893),r=t(1151);const a={},i="\u81ea\u5b9a\u4e49\u5bfc\u822a",s={id:"js/modules/custom-nav",title:"\u81ea\u5b9a\u4e49\u5bfc\u822a",description:"\u9884\u89c8",source:"@site/docs/js/modules/custom-nav.md",sourceDirName:"js/modules",slug:"/js/modules/custom-nav",permalink:"/docs/js/modules/custom-nav",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/js/modules/custom-nav.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"canvas \u5706\u73af\u5012\u8ba1\u65f6",permalink:"/docs/js/modules/canvas-countdown"},next:{title:"\u7ec4\u4ef6\u6a21\u677f",permalink:"/docs/js/modules/template"}},c={},l=[{value:"\u9884\u89c8",id:"\u9884\u89c8",level:2},{value:"html",id:"html",level:2},{value:"scss",id:"scss",level:2},{value:"js",id:"js",level:2}];function d(n){const e={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.a)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"\u81ea\u5b9a\u4e49\u5bfc\u822a",children:"\u81ea\u5b9a\u4e49\u5bfc\u822a"}),"\n",(0,o.jsx)(e.h2,{id:"\u9884\u89c8",children:"\u9884\u89c8"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.a,{href:"https://audfree.dev.joyonet.biz/promotion/black-friday/",children:"\u7ec4\u4ef6\u5730\u5740"}),(0,o.jsx)(e.br,{}),"\n",(0,o.jsx)(e.img,{src:t(4176).Z+"",width:"332",height:"511"})]}),"\n",(0,o.jsx)(e.h2,{id:"html",children:"html"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-html",children:'<aside class="bf-nav hide">\n  <a class="nav-link" href="#bf-single">42% Off Single Deals</a>\n  <a class="nav-link" href="#bf-bundle">60% Off Hot Bundles</a>\n  <a class="nav-link" href="#bf-offer">80% Off 6-in-1 Super Offer</a>\n  <div class="nav-totop">TOP</div>\n</aside>\n'})}),"\n",(0,o.jsx)(e.h2,{id:"scss",children:"scss"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-scss",children:'.bf-nav {\n  position: fixed;\n  top: 245px;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  z-index: 99;\n  transition: transform 0.25s ease;\n\n  @include respond-to("768-1650") {\n    transform: translateX(-80%);\n    &:hover {\n      transform: translateX(0);\n    }\n  }\n  @include respond-to(max-sm) {\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, 0);\n    width: 100%;\n    flex-direction: row;\n    &.hide {\n      transform: translate(-50%, -100%);\n    }\n  }\n  &::before {\n    content: "";\n    position: absolute;\n    background: url(/promotion/black-friday/images/nav-bg.png) no-repeat;\n    background-size: cover;\n    top: -103px;\n    left: 72px;\n    width: 95px;\n    height: 167px;\n    @include respond-to(max-sm) {\n      display: none;\n    }\n  }\n  .nav-link,\n  .nav-totop {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 250px;\n    height: 60px;\n    background-color: #3d3d3d;\n    border-radius: 10px;\n    font-family: Arial;\n    font-size: 16px;\n    color: #ffffff;\n    text-decoration: none;\n    transition-property: background-color, color, box-shadow, margin-bottom;\n    transition-duration: 0.25s;\n    transition-timing-function: ease;\n    @include respond-to(max-sm) {\n      font-size: 14px;\n      height: 45px;\n      text-align: center;\n    }\n    @include ie() {\n      &:not(:last-child) {\n        margin-bottom: 2px;\n      }\n    }\n    &:hover {\n      background-color: #ffcd69;\n      color: #000;\n      font-weight: bold;\n    }\n    &.active {\n      background-color: #ffcd69;\n      box-shadow: 4px 4px 0px 0px #ed80b5;\n      margin-bottom: 4px;\n      font-weight: bold;\n      font-size: 18px;\n      color: #000;\n      @include respond-to(max-sm) {\n        font-size: 16px;\n      }\n    }\n  }\n  .nav-totop {\n    font-size: 18px;\n    @include respond-to(max-sm) {\n      display: none;\n    }\n    &::after {\n      content: "";\n      position: relative;\n      margin-left: 11.5px;\n      bottom: 8px;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      border-color: transparent transparent #fff transparent;\n      border-width: 14px 8.5px;\n      transition: border-color 0.25s ease;\n    }\n    &:hover::after {\n      border-color: transparent transparent #000 transparent;\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"js",children:"js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:'// \u5bfc\u822a BEGIN\n(function () {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n  function clearchildrenActive(arr) {\n    if (!(arr instanceof NodeList)) {\n      arr = arr.children;\n    }\n    toArray(arr).forEach(function (el) {\n      el.classList.remove("active");\n    });\n    return;\n  }\n  function isIE() {\n    if (!!window.ActiveXObject || "ActiveXObject" in window) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  function getTop(el) {\n    let top = el.offsetTop;\n    let currentParent = el.offsetParent;\n    while (currentParent != null) {\n      top += currentParent.offsetTop;\n      currentParent = currentParent.offsetParent;\n    }\n    return top;\n  }\n  function getScrollTop() {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    // \u5224\u65ad\u6e32\u67d3\u6a21\u5f0f\u662f\u4e0d\u662f\u6807\u51c6\u6a21\u5f0f\n    var isCSS1Compat = (document.compatMode || "") === "CSS1Compat";\n    // \u5411\u4e0b\u6eda\u52a8\u7684\u9ad8\u5ea6\n    var scrolledTop = supportPageOffset\n      ? window.pageYOffset\n      : isCSS1Compat\n      ? document.documentElement.scrollTop\n      : document.body.scrollTop;\n    return scrolledTop;\n  }\n  function scrollTo(el, callback) {\n    const fixedOffset = getTop(el).toFixed();\n    const onScroll = function (e, forceStop) {\n      if (window.pageYOffset.toFixed() === fixedOffset || forceStop) {\n        window.removeEventListener("scroll", onScroll);\n        window.removeEventListener("keydown", onKeyDown);\n        window.removeEventListener("wheel", onWheel);\n        callback ? callback() : null;\n      }\n    };\n    const onKeyDown = function (e) {\n      if (e.keyCode !== "32") {\n        return;\n      }\n      onScroll(null, true);\n      window.removeEventListener("scroll", onScroll);\n      window.removeEventListener("keydown", onKeyDown);\n    };\n    const onWheel = function () {\n      onScroll(null, true);\n      window.removeEventListener("scroll", onScroll);\n      window.removeEventListener("wheel", onWheel);\n    };\n    window.addEventListener("scroll", onScroll);\n    window.addEventListener("wheel", onWheel);\n    window.addEventListener("keydown", onKeyDown);\n    onScroll();\n    window.scrollTo({\n      top: fixedOffset,\n      behavior: "smooth",\n    });\n  }\n  function scrollTo4IE(el, topSpace) {\n    var targetTop = getTop(el) + topSpace;\n    function loopAnimate() {\n      var currentTop = getScrollTop();\n      var distance = currentTop - targetTop;\n      if (Math.abs(distance) > 2) {\n        window.scrollTo(0, currentTop - distance / 4);\n        window.requestAnimationFrame(loopAnimate);\n      }\n    }\n    loopAnimate();\n  }\n  window.addEventListener("DOMContentLoaded", function () {\n    var anchorTop = document.querySelector(".bf-nav > .nav-totop");\n    anchorTop.addEventListener("click", function () {\n      if (!isIE()) {\n        scrollTo(document.documentElement, function () {\n          isClick = false;\n        });\n      } else {\n        scrollTo4IE(document.documentElement, 0);\n      }\n    });\n  });\n  window.addEventListener("DOMContentLoaded", function () {\n    var isClick = false;\n    var bfNav = document.querySelector(".bf-nav");\n    var anchorList = document.querySelectorAll(\'.bf-nav > a[href^="#"]\');\n    var anchorRange = [];\n    toArray(anchorList).forEach(function (anchor) {\n      var targetId = anchor.getAttribute("href");\n      var scrolltarget = document.querySelector(targetId);\n      var targetHeightRange = {\n        anchorEl: anchor,\n        targetEl: scrolltarget,\n        top: getTop(scrolltarget),\n        bottom:\n          getTop(scrolltarget) + scrolltarget.getBoundingClientRect().height,\n      };\n      anchorRange.push(targetHeightRange);\n      anchor.addEventListener("click", function (e) {\n        e.preventDefault();\n        clearchildrenActive(anchorList);\n        anchor.classList.add("active");\n        if (!isIE()) {\n          isClick = true;\n          scrollTo(scrolltarget, function () {\n            isClick = false;\n          });\n        } else {\n          scrollTo4IE(scrolltarget, 0);\n        }\n      });\n    });\n\n    var activeAnchorFn = function () {\n      if (isClick) {\n        return;\n      }\n      // \u5411\u4e0b\u6eda\u52a8\u7684\u9ad8\u5ea6\n      var scrolledTop = getScrollTop();\n      // \u5f53\u524d\u5c4f\u5e55\u4e2d\u95f4\u7ebf\u5728\u6587\u6863\u4e2d\u7684\u7edd\u5bf9\u9ad8\u5ea6\n      var currentViewportAbsHeight =\n        scrolledTop + document.documentElement.clientHeight / 2;\n      var isContained = false;\n      anchorRange.forEach(function (range) {\n        if (\n          currentViewportAbsHeight > range.top &&\n          currentViewportAbsHeight < range.bottom &&\n          !isContained\n        ) {\n          clearchildrenActive(range.anchorEl.parentNode);\n          range.anchorEl.classList.add("active");\n          isContained = true;\n        }\n      });\n      if (isContained) {\n        if (scrolledTop >= 200) {\n          bfNav.classList.remove("hide");\n        } else {\n          bfNav.classList.add("hide");\n        }\n        return;\n      } else {\n        bfNav.classList.add("hide");\n      }\n      // TODO \u5982\u679c\u4e0d\u5728\u5143\u7d20\u9ad8\u5ea6\u8303\u56f4\u5185, \u6dfb\u52a0\u5224\u65ad\u6761\u4ef6 \u662f\u5426\u5224\u65ad\u5143\u7d20\u4e2d\u7ebf\u8ddd\u79bb \u662f\u5426\u6e05\u7a7aactive\n      if (false) {\n        var minDistant, activeIndex;\n        anchorRange.forEach(function (range, index) {\n          var elMiddleTop = (range.top + range.bottom) / 2;\n          var currentDistance = Math.abs(\n            currentViewportAbsHeight - elMiddleTop\n          );\n          if (!minDistant) {\n            minDistant = currentDistance;\n            activeIndex = index;\n          }\n          if (currentDistance < minDistant) {\n            minDistant = currentDistance;\n            activeIndex = index;\n          }\n        });\n        clearchildrenActive(anchorRange[activeIndex].anchorEl.parentNode);\n        anchorRange[activeIndex].anchorEl.classList.add("active");\n      } else {\n        anchorRange.forEach(function (item) {\n          item.anchorEl.classList.remove("active");\n        });\n      }\n    };\n    var activeDebounceAnchorFn = debounce(activeAnchorFn, 20);\n\n    // Edge\u6d4f\u89c8\u5668debounce\u76d1\u542c\u8c03\u7528\u592a\u6162, \u53d6\u6d88debounce\n    if (navigator.userAgent.indexOf("Edg") > 0) {\n      window.addEventListener("scroll", activeAnchorFn, false);\n    } else {\n      window.addEventListener("scroll", activeDebounceAnchorFn, false);\n    }\n\n    if (isIE() || true) {\n      var stickyNavbarEl = document.querySelector(".bf-nav");\n      var navbarContainer = stickyNavbarEl.parentNode;\n      navbarContainer.style.height = "auto";\n      var fixRange = {\n        top: getTop(stickyNavbarEl),\n        bottom:\n          getTop(navbarContainer) +\n          navbarContainer.getBoundingClientRect().height -\n          stickyNavbarEl.getBoundingClientRect().height,\n      };\n      var stickyTop = Number(getComputedStyle(stickyNavbarEl).top.slice(0, -2));\n      var containerTop = getTop(navbarContainer);\n      var sticky2Fix4IE = debounce(function () {\n        var currentViewportWithTop = getScrollTop() + stickyTop;\n        if (currentViewportWithTop < fixRange.top) {\n          stickyNavbarEl.style.position = "";\n          stickyNavbarEl.style.top = "";\n        } else if (currentViewportWithTop < fixRange.bottom) {\n          stickyNavbarEl.style.position = "fixed";\n          stickyNavbarEl.style.top = "";\n        } else if (currentViewportWithTop >= fixRange.bottom) {\n          stickyNavbarEl.style.position = "absolute";\n          stickyNavbarEl.style.top = fixRange.bottom - containerTop + "px";\n        }\n      }, 10);\n      window.addEventListener("scroll", sticky2Fix4IE, false);\n    }\n  });\n})();\n// \u5bfc\u822a END\n'})})]})}function f(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},4176:(n,e,t)=>{t.d(e,{Z:()=>o});const o=t.p+"assets/images/custom-nav-67726d82b0af7e3f69f2b0c910c3dfc3.png"},1151:(n,e,t)=>{t.d(e,{Z:()=>s,a:()=>i});var o=t(7294);const r={},a=o.createContext(r);function i(n){const e=o.useContext(a);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),o.createElement(a.Provider,{value:e},n.children)}}}]);